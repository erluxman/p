# Prompt: Refactor (Behavior Preserving)

@project_constitution.md @workflow_protocol.md
@ai-dev/checklists/testing_checklist.md

Goal of refactor:

- Why:
- Scope (exact files only):
- Non-goals:

Rules:

- Do not change behavior (tests prove equivalence).
- No unrelated formatting churn.
- If scope expands, stop and re-plan.

Request:

1. List current pain points and proposed refactor steps.
2. Identify tests that act as a safety net (add missing tests first).
3. Apply smallest refactor increment that keeps tests passing.
4. Summarize diff and remaining follow-ups.

STOP after each step and wait for approval.
